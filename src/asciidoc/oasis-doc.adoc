= Oasis Documentation
:linkcss:
:experimental:
:numbered:
:icons: font
:source-highlighter: coderay
:toc: left
:docinfo1:

== Getting Started

OMS is orchestration tool for service providers. Service providers (SP) are independent systems, that optionally implement 
a defined set of REST services that can be requested from OMS. Despite being independent, each SP has to be registered 
in the OMS.

image::oms-infrastructure.png[Overview]

The goal of the OMS is to manage the configuration of services to be provisioned for each tenant. A service is specific 
operational task that may require input, and/or generates output. Examples of services are data harvesting (importing 
data into a data store), computing recommendations, run optimisation trials, i.e. A/B testing; SPs are geared at 
executing these tasks which are configured through the OMS. 

== Service Provider

Service providers are any applications that implements REST services that defined by OMS.

For heartbeat checking from OMS, service provider must implements `/heartbeat` endpoint which should return the following
JSON is nothing is wrong:

[source,json]
----
{
   "ok": true
}
----

Because heartbeat is performed repeateadly by OMS, the implementation of this API should be lightweight.

OMS will execute a job in SP by invoking `/execute/{jobId}` using POST method.  `jobId` is a value that is generated by
OMS to identify a individual job.  This POST method also contains Json payload that is previously configured in OMS.  This
 payload can be in any format.  For example, OMS may invoke `/execute/123` to run job id 123 with the following Json:
 
[source,json]
----
{
   "param1": "value1",
   "param2": "value2",
   "param3": "value3"
}
----

To retrieve the execution status of a job, OMS will invoke a GET request to `/execute/{jobId}` in service provider.  If the job
is done successfully, the API implementation should return the following Json:

[source,json]
----
{
   "done": true,
   "at": "2015-01-01T10:00:00"   //  <1>
}
----
<1> Date in ISO format

If the job is not done yet, the API implementation should return the following Json:

[source,json]
----
{
   "done": false
}
----

If there is an error while executing the job, the API implementation should return the following Json:

[source,json]
----
{
   "done": false,
   "at": "2015-01-01T10:00:00",   // <1>
   "error": "the error message"  
}
----
<1> Date in ISO format when the error was encountered, or `null` if this information is not available.

TIP: OMS doesn't dictate how service provider should be implemented.  If you have closed source service provider or you can't
change the service provider to provide API implementations required by OMS, you can create a new implementation 
service provider as a router to the existing service provider.  This new service provider will provide API implementations 
 for OMS and routes requests from OMS to one or more existing service providers.